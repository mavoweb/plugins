<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Markdown tests</title>
	<link rel="stylesheet" href="https://test.mavo.io/style.css" />
	<link rel="stylesheet" href="https://get.mavo.io/mavo.css" />
	<script src="https://get.mavo.io/mavo.js"></script>
</head>
<body>

<h1>Markdown tests</h1>

<section mv-app="markdown">
	<h1>Basic</h1>

	<table class="reftest">
		<tr data-test="elements">
			<td>
				<div class="markdown" property="markdown">
## Heading
Hello, I am **Lea Verou**. [Mavo](http://mavo.io) is awesome.

```js
Mavo.init();
```</div>
			</td>
			<td>
				<div>
					<h2>Heading</h2>
					<p>Hello, I am <strong>Lea Verou</strong>. <a href="http://mavo.io">Mavo</a> is awesome.</p>
					<pre><code class="js language-js">Mavo.init();</code></pre>
				</div>
			</td>
		</tr>
		<tr>
			<td>
				[markdown]
			</td>
			<td mv-expressions="none">
				<script>document.write($$('td div[property="markdown"]').pop().innerHTML)</script>
			</td>
		</tr>
		<tr data-test="elements" title="With options">
			<td>
				<div property="markdown2" mv-markdown-options="headerLevelStart: 2, tasklists">
# Heading

- [x] This task is done
- [ ] This is still pending
				</div>
			</td>
			<td>
				<div>
					<h2>Heading</h2>
					<ul>
						<li style="list-style-type: none;" class="task-list-item"><input checked="" style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;" disabled="" type="checkbox"> This task is done</li>
						<li style="list-style-type: none;" class="task-list-item"><input style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;" disabled="" type="checkbox"> This is still pending</li>
					</ul>
				</div>
			</td>
		</tr>
	</table>
</section>

	<h2 property="heading"></h2>
	<p property="paragraph" mv-multiple></p>

<section mv-app="markdown" mv-storage="#data">
	<h1>Rendered</h1>

	<table class="reftest" mv-expressions="none">
		<tr>
			<td>
				<pre id="data">{
	"markdown": "Foo **bar** [baz](http://mavo.io) &lt;img src=123 onerror=\"console.log('XSS')\" />"
}</pre>
			</td>
			<td>
				<script>document.write($$("td pre").pop().outerHTML)</script>
			</td>
		</tr>
		<tr data-test="elements">
			<td>
				<div class="markdown" property="markdown"></div>
			</td>
			<td>
				<div><p>Foo <strong>bar</strong> <a href="http://mavo.io">baz</a></p></div>
			</td>
		</tr>
	</table>
</section>

<section mv-app="markdown" mv-storage="https://github.com/leaverou/mavo-test/data/markdown.md">
	<h1>Rendered asynchronously</h1>

	<table class="reftest">
		<tr data-test="elements">
			<td>
				<div property="content"></div>
			</td>
			<td>
				<div>
					<h1 id="heading">Heading</h1>
					<p>Paragraph <strong>bold</strong> <em>italic</em></p>
				</div>
			</td>
		</tr>
		<tr>
			<td>[content]</td>
			<td># Heading

Paragraph **bold** *italic*
</td>
		</tr>
	</table>
</section>

<section mv-app mv-storage="https://github.com/leaverou/foo/bar.json">
	<h1>Default value with nonexistent remote storage</h1>
	<table class="reftest">
		<tr data-test="elements">
			<td>
				<div class="markdown" property="markdown">
## Heading
Hello, I am **Lea Verou**. [Mavo](http://mavo.io) is awesome.

```js
Mavo.init();
```</div>
			</td>
			<td>
				<div>
					<h2>Heading</h2>
					<p>Hello, I am <strong>Lea Verou</strong>. <a href="http://mavo.io">Mavo</a> is awesome.</p>
					<pre><code class="js language-js">Mavo.init();</code></pre>
				</div>
			</td>
		</tr>
	</table>
</section>

<script src="mavo-markdown.js"></script>

<script src="https://test.mavo.io/test.js"></script>

</body>
</html>
